{% extends 'base.html' %}
{% load static %}
{% block content %}
<section class="section-content padding-y bg">
    <div class="container">
        <!-- ============================ COMPONENT 1 ================================= -->
        <!-- Breadcrumb Begin -->
        <div class="breadcrumb-option">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="breadcrumb__links">
                            <a href="{% url 'index' %}"><i class="fa fa-home"></i> Home|</a>
                            <a href="{% url 'store' %}">All Products|</a></li>
                            <!-- <a href="#"></a> -->
                            <span>{{ single_product.product_name }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breadcrumb End -->

        <div class="container mt-3">
            <div class="row">
                <!-- Image Gallery Section -->
                <div class="col-md-4">
                    <article class="gallery-wrap">
                        <div class="img-big-wrap">
                            <a href="#"><img class="magnify" src="{{ single_product.product_images.first.image.url }}"></a>
                        </div> <!-- img-big-wrap.// -->
                        <div class="product-images mt-2">
                            <div class="row">
                                {% for image in single_product.product_images.all %}
                                    {% if not forloop.first %} <!-- Exclude the first image -->
                                        <div class="col-6">
                                            <img src="{{ image.image.url }}" alt="{{ single_product.product_name }}" class="img-fluid mb-3 small-image">
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </article> <!-- gallery-wrap .end// -->
                </div> <!-- product-images.// -->

                 <!-- product-details.// -->
                <div class="col-md-8">
                <div class="product-details">
                <main class="col-md-6 border-left">

                    <!-- Product details content -->
                <form action="{% url 'add_cart' single_product.id %}" method="POST">  
                    {% csrf_token %}
                    <article class="content-body">
                        <h2 class="title">{{single_product.product_name}}</h2>
                        <div class="mb-3"> 
                            <var class="price h4">${{single_product.price}}</var> 
                        </div> 
                        <p>{{single_product.description}}</p>
                        <hr>
                        <div class="row">
                            <div class="item-option-select">
                                <h6>Choose Color</h6>
                                <select name="color" class="form-control" required>
                                    <option value="" disabled selected>Select</option>
                                    {% for i in single_product.variation_set.colors %}
                                        <option value="{{i.variation_value | lower}}">{{i.variation_value | capfirst}}</option>
                                    {% endfor %}
                                </select>    
                            </div>  
                        </div> <!-- row.// -->
                        <div class="row">
                            <div class="item-option-select">
                                <h6>Select Size</h6>
                                <select name="size" class="form-control">
                                    <option value="" disabled selected>Select</option>
                                    {% for i in single_product.variation_set.sizes %}
                                        <option value="{{i.variation_value | lower}}">{{i.variation_value | capfirst}}</option>
                                    {% endfor %}
                                   
                                </select>
                                
                            </div>
                        </div> <!-- row.// -->  
                        <hr>
                        {% if single_product.stock <= 0 %}
                            <h5 class="text-danger">Out Of Stock </h5>
                        {% else %}
                            <button type="submit" class="btn  btn-primary"> <span class="text">Add to cart</span> <i class="fas fa-shopping-cart"></i>  </button>
                            
                        {% endif %}
                        
                        <hr>
                        <div class="coupon_applied" id="coupon">
                            <h5>Coupon: Save $10</h5>
                        </div>
                        <hr>
                        <!-- Static rating display -->
                        
                        <div class="product-rating" id="productRating">   
                            <br>
                            <span class="rating">★★★★☆</span>
                            <span class="rating-count">(200 reviews)</span>
                        </div>
                        <br>
                        <div class="user-rating">
                            <h3>Rate this product:</h3>
                            <br>
                            <!-- User rating input -->
                            <div class="rating-input" id="ratingInput">
                                <span class="star" data-value="1">☆</span>
                                <span class="star" data-value="2">☆</span>
                                <span class="star" data-value="3">☆</span>
                                <span class="star" data-value="4">☆</span>
                                <span class="star" data-value="5">☆</span>
                            </div>
                        </div>
                     <!-- product-info-aside .// -->
                    </article>
                </form>  
                </main> <!-- col.// -->
            </div> <!-- row.// -->
        </div> <!-- card.// -->
        <!-- ============================ COMPONENT 1 END .// ================================= -->

        <br>

        <div class="row">
            <div class="col-md-9">
                <header class="section-heading">
                    <h3>Customer Reviews </h3>  
                </header>
                <article class="box mb-3">
                    <div class="icontext w-100">
                        <img src="{% static './images/avatars/avatar1.jpg' %}" class="img-xs icon rounded-circle">
                        <div class="text">
                            <span class="date text-muted float-md-right">12.03.2024 </span>  
                            <h6 class="mb-1">John </h6>
                        </div>
                    </div> <!-- icontext.// -->
                    <div class="mt-3">
                        <p>
                            Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                            quis nostrud exercitation ullamco laboris nisi ut aliquip
                        </p>   
                    </div>
                </article>
           

    
        
    
        </div> <!-- col.// -->
    </div> <!-- row.// -->
    
    
    </div> <!-- container .//  -->
    </section>
    <!-- ========================= SECTION CONTENT END// ========================= -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="https://unpkg.com/medium-zoom/dist/medium-zoom.min.js"></script>
    <!-- Initialize medium-zoom for images -->
    <script>
    mediumZoom('.magnify', {
        margin: 0,
        background: '#000',
        scrollOffset: 40,
        container: null,
        template: null,
    });
    
    mediumZoom('.small-image', {
        margin: 0,
        background: '#000',
        scrollOffset: 40,
        container: null,
        template: null,
    });
    </script>
    
{% endblock %}
    